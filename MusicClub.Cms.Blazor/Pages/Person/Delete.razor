@page "/person/delete/{id:int}"
@using MusicClub.Cms.Blazor.Helpers

@layout PersonCrudLayout

<DeleteRequest TDataRequest="PersonRequest"
               TDataResult="PersonResult"
               TFilterRequest="PersonFilterRequest"
               TFilterResult="PersonFilterResult"
               TApiService="IPersonService"
               TDataResultHelpers="IDataResultHelpers<PersonResult>"
               Id="Id"
               Model="Person"
               Context="Context">
    <Info>
        <ul>
            <li>
                <p class="label">Id</p>
                <p class="input">@Context.Id</p>
            </li>

            <li>
                <p class="label">Firstname</p>
                <p class="input">@Context.Firstname</p>
            </li>

            <li>
                <p class="label">Lastname</p>
                <p class="input">@Context.Lastname</p>
            </li>

            <li>
                <p class="label">Created</p>
                <p class="input">@Context.Created.ToLongTimeString()</p>
            </li>

            <li>
                <p class="label">Updated</p>
                <p class="input">@Context.Updated.ToLongTimeString()</p>
            </li>

            <li class="@(showImageImg ? "show-img" : "hide-img")">
                <p class="label">Image</p>
                <p class="input">@(Context.ImageResult?.Alt ?? "/")</p>

                @if (Context.ImageResult is not null)
                {
                    @if (showImageImg)
                    {
                        <button @onclick="() => showImageImg = false">Hide image</button>
                    }
                    else
                    {
                        <button @onclick="() => showImageImg = true">Show image</button>
                    }

                    <img src="@($"https://localhost:7061/image/download/{Context.ImageResult.Id}?updated={Context.ImageResult.Updated}")" />
                }
            </li>

            <li>
                <p class="label">Dependencies</p>

                <ul>
                    <li>Artists: @Context.ArtistsCount</li>
                    <li>Workers: @Context.WorkersCount</li>
                 @*    <li>ApplicationUsers: @Context.ApplicationUsersCount</li> *@ 
                </ul>
            </li>
        </ul>
    </Info>
</DeleteRequest>

@code {
    [Parameter]
    public int Id { get; set; }

    private bool showImageImg;
}